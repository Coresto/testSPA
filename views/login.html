@{layout('login')}
@{title(config.name)}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
	<meta name="robots" content="all,follow" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
	<meta name="apple-mobile-web-app-title" content="@{'%name'}" />
	<link rel="apple-touch-icon" href="/img/icon.png" />
	<link rel="stylesheet" href="//cdn.componentator.com/spa.min@16.css" />
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,200,700" />
	<script src="//cdn.componentator.com/spa.min@16.js"></script>
	@{import('meta', 'head', 'default.css', 'default.js', 'favicon.ico')}
</head>
<body data-jc="exec">
	<div class="panel panelshow">
		<h1><i class="fa fa-lock"></i>@(Login)</h1>
		<div class="padding">
			<div class="m" data-jc="textbox__form.username__icon2:user;type:text;required:true;autofocus:true;autofill:true;delay:0;">@(User name)</div>
			<div class="m" data-jc="textbox__form.password__icon2:lock;type:password;required:true;autofill:true;delay:0;">@(Password)</div>
			<div class="m" data-jc="error__form.response" class="ui-error hidden"></div>
			<div data-jc="validation__form__if:form.username && form.password;">
				<button name="submit" type="submit" disabled="disabled" class="button b mt5 login exec" data-exec="app/login"><i class="fa fa-lock"></i>@(Login)</button>
			</div>
		</div>
	</div>
	<script type="text/javascript" charset="utf-8">
		PLUGIN('app', function(exports) {

			exports.login = function() {
				AJAX('POST /login', form, function(value, err, response) {
					if (err) {
						console.log('request error --> ' + err);
						return;
					}
					console.log('login response');
					window.location.reload();
				});
			};

		});

	</script>
</body>
</html>
